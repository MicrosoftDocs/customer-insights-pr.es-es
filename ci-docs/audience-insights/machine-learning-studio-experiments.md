---
title: Experimentos de Machine Learning Studio (clásico)
description: Use modelos de Machine Learning Studio (clásico) en Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669039"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="9eee6-103">Usar modelos basados en Azure Machine Learning Studio (clásico)</span><span class="sxs-lookup"><span data-stu-id="9eee6-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="9eee6-104">Los datos unificados en Dynamics 365 Customer Insights son un origen para crear modelos de aprendizaje automático que pueden generar información empresarial adicional.</span><span class="sxs-lookup"><span data-stu-id="9eee6-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="9eee6-105">Customer Insights se integra con Machine Learning Studio (clásico) para usar sus propios modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="9eee6-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="9eee6-106">Para ver cómo los modelos desarrollados en AAzure Machine Learning se integran con Customer Insights, consulte [Experimentos de Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="9eee6-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="9eee6-107">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="9eee6-107">Prerequisites</span></span>

- <span data-ttu-id="9eee6-108">Acceso a Customer Insights</span><span class="sxs-lookup"><span data-stu-id="9eee6-108">Access to Customer Insights</span></span>
- <span data-ttu-id="9eee6-109">Una suscripción de Azure Enterprise activa</span><span class="sxs-lookup"><span data-stu-id="9eee6-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="9eee6-110">Perfiles de cliente unificados</span><span class="sxs-lookup"><span data-stu-id="9eee6-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="9eee6-111">Configuración de [Exportación de entidades a Azure Blob Storage](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="9eee6-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="9eee6-112">Configurar Machine Learning Studio clásico</span><span class="sxs-lookup"><span data-stu-id="9eee6-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="9eee6-113">En un primer paso, necesitamos crear un espacio de trabajo y abrir Machine Learning Studio (clásico).</span><span class="sxs-lookup"><span data-stu-id="9eee6-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="9eee6-114">Vaya a [https://www.portal.azure.com](https://www.portal.azure.com/) e inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="9eee6-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="9eee6-115">Seleccione **Crear un recurso**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="9eee6-116">Busque **Espacio de trabajo Machine Learning Studio** y seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="9eee6-117">Introduzca los detalles requeridos para [crear el espacio de trabajo](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="9eee6-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="9eee6-118">Elija el **Nivel de precios del plan de servicio web** según la cantidad de datos que planea importar.</span><span class="sxs-lookup"><span data-stu-id="9eee6-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="9eee6-119">Para un mejor rendimiento, seleccione la **Ubicación** geográficamente más cercana a usted.</span><span class="sxs-lookup"><span data-stu-id="9eee6-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="9eee6-120">Después de crear el recurso, aparecerá el panel del espacio de trabajo Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="9eee6-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="9eee6-121">Seleccione **Ejecutar Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interfaz de usuario de Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="9eee6-123">Trabajar con Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="9eee6-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="9eee6-124">Ahora puede crear un nuevo experimento o importar una plantilla de experimento existente desde la galería de muestras.</span><span class="sxs-lookup"><span data-stu-id="9eee6-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="9eee6-125">Hay experimentos de ejemplo para tres escenarios estándar:</span><span class="sxs-lookup"><span data-stu-id="9eee6-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="9eee6-126">Predicción de abandono</span><span class="sxs-lookup"><span data-stu-id="9eee6-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="9eee6-127">Valor del tiempo de vida del cliente</span><span class="sxs-lookup"><span data-stu-id="9eee6-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="9eee6-128">Recomendación de producto o siguiente mejor acción</span><span class="sxs-lookup"><span data-stu-id="9eee6-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="9eee6-129">Si crea un nuevo experimento o utiliza una plantilla de experimento de la galería, debe configurar las propiedades de **Importar datos**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="9eee6-130">Use la experiencia guiada o proporcione detalles directamente para acceder al Azure Blob Storage que contiene sus datos.</span><span class="sxs-lookup"><span data-stu-id="9eee6-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experimento con Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="9eee6-132">Ahora puede crear una canalización de procesamiento personalizada para limpiar y preprocesar los datos, extraer características y entrenar un modelo adecuado.</span><span class="sxs-lookup"><span data-stu-id="9eee6-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="9eee6-133">Pruebe y optimice el modelo de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eee6-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="9eee6-134">Cuando esté satisfecho con la calidad de un modelo, seleccione **Configurar servicio web** > **Servicio web predictivo**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="9eee6-135">Esta opción importa el modelo entrenado y la canalización de características del experimento de entrenamiento a un servicio predictivo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="9eee6-136">El servicio predictivo puede tomar otro conjunto de datos de entrada con el esquema utilizado en el experimento de entrenamiento para hacer predicciones.</span><span class="sxs-lookup"><span data-stu-id="9eee6-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Configurar un servicio web predictivo](media/predictive-webservice-control.png)

1. <span data-ttu-id="9eee6-138">Una vez que el experimento del servicio web predictivo tenga éxito, puede implementarlo para la programación automática.</span><span class="sxs-lookup"><span data-stu-id="9eee6-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="9eee6-139">Para que el servicio web funcione con Customer Insights, seleccione **Implementar servicio web** > **Implementar servicio web [nuevo] Vista previa**.</span><span class="sxs-lookup"><span data-stu-id="9eee6-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="9eee6-140">[Más información sobre implementar un servicio web](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="9eee6-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Implementar un servicio web predictivo](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="9eee6-142">Modelos de muestra de la galería</span><span class="sxs-lookup"><span data-stu-id="9eee6-142">Sample models from the gallery</span></span>

<span data-ttu-id="9eee6-143">Usaremos un escenario ficticio de Contoso Hotel para los modelos de este artículo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="9eee6-144">Contoso Hotel recopila los siguientes datos:</span><span class="sxs-lookup"><span data-stu-id="9eee6-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="9eee6-145">Datos de CRM que consisten en la actividad de la estancia en el hotel.</span><span class="sxs-lookup"><span data-stu-id="9eee6-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="9eee6-146">El conjunto de datos incluye información sobre las fechas de estancia de cada cliente registrado.</span><span class="sxs-lookup"><span data-stu-id="9eee6-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="9eee6-147">También contiene información sobre la reserva, los tipos de habitaciones, los detalles del gasto, etc.</span><span class="sxs-lookup"><span data-stu-id="9eee6-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="9eee6-148">Los datos abarcan cuatro años, desde enero de 2014 hasta enero de 2018.</span><span class="sxs-lookup"><span data-stu-id="9eee6-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="9eee6-149">Perfiles de clientes de los huéspedes del hotel.</span><span class="sxs-lookup"><span data-stu-id="9eee6-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="9eee6-150">Estos perfiles contienen información sobre cada cliente, incluido su nombre, fecha de nacimiento, dirección postal, sexo y número de teléfono.</span><span class="sxs-lookup"><span data-stu-id="9eee6-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="9eee6-151">Uso de servicios que ofrece el hotel, como spa, lavandería, WiFi o mensajería.</span><span class="sxs-lookup"><span data-stu-id="9eee6-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="9eee6-152">Esta información se registra para cada cliente registrado.</span><span class="sxs-lookup"><span data-stu-id="9eee6-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="9eee6-153">Normalmente, el uso de los servicios está relacionado con la estancia.</span><span class="sxs-lookup"><span data-stu-id="9eee6-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="9eee6-154">En algunos casos, los clientes pueden utilizar los servicios sin alojarse en el hotel.</span><span class="sxs-lookup"><span data-stu-id="9eee6-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="9eee6-155">Análisis de abandono</span><span class="sxs-lookup"><span data-stu-id="9eee6-155">Churn Analysis</span></span>

<span data-ttu-id="9eee6-156">El análisis de abandono se aplica a diferentes áreas comerciales.</span><span class="sxs-lookup"><span data-stu-id="9eee6-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="9eee6-157">En este ejemplo, veremos el abandono del servicio, específicamente en el contexto de los servicios hoteleros, como se describe anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9eee6-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="9eee6-158">Proporciona un ejemplo funcional de una canalización de modelos de extremo a extremo que se puede utilizar como punto de partida para cualquier otro tipo de modelo de abandono.</span><span class="sxs-lookup"><span data-stu-id="9eee6-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="9eee6-159">Definición de abandono</span><span class="sxs-lookup"><span data-stu-id="9eee6-159">Definition of Churn</span></span>

<span data-ttu-id="9eee6-160">La definición de abandono puede diferir según el escenario.</span><span class="sxs-lookup"><span data-stu-id="9eee6-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="9eee6-161">En este ejemplo, un huésped que no ha visitado el hotel en el último año debe etiquetarse como abandonado.</span><span class="sxs-lookup"><span data-stu-id="9eee6-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="9eee6-162">La plantilla de experimento se puede importar desde la galería.</span><span class="sxs-lookup"><span data-stu-id="9eee6-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="9eee6-163">Primero, asegúrese de importar los datos para **Actividad de estancia en hotel**, **Información del cliente** y **Datos de uso del servicio** desde Azure Blob Storage.</span><span class="sxs-lookup"><span data-stu-id="9eee6-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importar datos para el modelo de abandono](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="9eee6-165">Caracterización</span><span class="sxs-lookup"><span data-stu-id="9eee6-165">Featurization</span></span>

<span data-ttu-id="9eee6-166">Basándonos en la definición de abandono, primero identificamos las características sin procesar que influirán en la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="9eee6-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="9eee6-167">Luego, procesamos estas características sin procesar en características numéricas que se pueden usar con los modelos Aprendizaje automático.</span><span class="sxs-lookup"><span data-stu-id="9eee6-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="9eee6-168">La integración de datos ocurre en Customer Insights para que podamos unir estas tablas usando el *Id. de cliente*.</span><span class="sxs-lookup"><span data-stu-id="9eee6-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Unir datos importados](media/join-imported-data.png)

<span data-ttu-id="9eee6-170">La caracterización para construir el modelo para el análisis de abandono puede ser un poco complicada.</span><span class="sxs-lookup"><span data-stu-id="9eee6-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="9eee6-171">Los datos son una función del tiempo con la nueva actividad hotelera registrada diariamente.</span><span class="sxs-lookup"><span data-stu-id="9eee6-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="9eee6-172">Durante la caracterización, queremos generar características estáticas a partir de los datos dinámicos.</span><span class="sxs-lookup"><span data-stu-id="9eee6-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="9eee6-173">En este caso, generamos múltiples características de la actividad hotelera con una ventana deslizante de un año.</span><span class="sxs-lookup"><span data-stu-id="9eee6-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="9eee6-174">También ampliamos las características categóricas como el tipo de habitación o el tipo de reserva en características separadas mediante la codificación one-hot.</span><span class="sxs-lookup"><span data-stu-id="9eee6-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="9eee6-175">Lista final de características:</span><span class="sxs-lookup"><span data-stu-id="9eee6-175">Final list of features:</span></span>

| <span data-ttu-id="9eee6-176">**Número**</span><span class="sxs-lookup"><span data-stu-id="9eee6-176">**Number**</span></span>  | <span data-ttu-id="9eee6-177">**Columna_original**</span><span class="sxs-lookup"><span data-stu-id="9eee6-177">**Original_Column**</span></span>          | <span data-ttu-id="9eee6-178">**Funciones derivadas**</span><span class="sxs-lookup"><span data-stu-id="9eee6-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9eee6-179">1</span><span class="sxs-lookup"><span data-stu-id="9eee6-179">1</span></span>           | <span data-ttu-id="9eee6-180">Tipo de habitación</span><span class="sxs-lookup"><span data-stu-id="9eee6-180">Room Type</span></span>                    | <span data-ttu-id="9eee6-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="9eee6-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="9eee6-182">2</span><span class="sxs-lookup"><span data-stu-id="9eee6-182">2</span></span>           | <span data-ttu-id="9eee6-183">Tipo de reserva</span><span class="sxs-lookup"><span data-stu-id="9eee6-183">Booking Type</span></span>                 | <span data-ttu-id="9eee6-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="9eee6-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="9eee6-185">3</span><span class="sxs-lookup"><span data-stu-id="9eee6-185">3</span></span>           | <span data-ttu-id="9eee6-186">Categoría de viaje</span><span class="sxs-lookup"><span data-stu-id="9eee6-186">Travel Category</span></span>              | <span data-ttu-id="9eee6-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="9eee6-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="9eee6-188">4</span><span class="sxs-lookup"><span data-stu-id="9eee6-188">4</span></span>           | <span data-ttu-id="9eee6-189">Dólares gastados</span><span class="sxs-lookup"><span data-stu-id="9eee6-189">Dollars Spent</span></span>                | <span data-ttu-id="9eee6-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="9eee6-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="9eee6-191">5</span><span class="sxs-lookup"><span data-stu-id="9eee6-191">5</span></span>           | <span data-ttu-id="9eee6-192">Fechas de entrada y salida</span><span class="sxs-lookup"><span data-stu-id="9eee6-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="9eee6-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="9eee6-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="9eee6-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="9eee6-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="9eee6-195">6</span><span class="sxs-lookup"><span data-stu-id="9eee6-195">6</span></span>           | <span data-ttu-id="9eee6-196">Uso de servicios</span><span class="sxs-lookup"><span data-stu-id="9eee6-196">Service Usage</span></span>                | <span data-ttu-id="9eee6-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="9eee6-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="9eee6-198">Selección de modelo</span><span class="sxs-lookup"><span data-stu-id="9eee6-198">Model selection</span></span>

<span data-ttu-id="9eee6-199">Ahora tenemos que elegir el algoritmo óptimo para usar.</span><span class="sxs-lookup"><span data-stu-id="9eee6-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="9eee6-200">En este caso, la mayoría de las funciones se basan en funciones categóricas.</span><span class="sxs-lookup"><span data-stu-id="9eee6-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="9eee6-201">Normalmente, los modelos basados en árboles de decisión funcionan bien.</span><span class="sxs-lookup"><span data-stu-id="9eee6-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="9eee6-202">Si solo hay características numéricas, las redes neuronales podrían ser una mejor opción.</span><span class="sxs-lookup"><span data-stu-id="9eee6-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="9eee6-203">La máquina de vectores de soporte (SVM) también es un buen candidato en tales situaciones; sin embargo, necesita algunos ajustes para obtener el mejor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9eee6-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="9eee6-204">Nosotros elegimos **Árbol de decisión mejorado de dos clases** como el primer modelo de elección, seguido de **SVM de dos clases** como segundo modelo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="9eee6-205">Azure Machine Learning Studio le permite realizar pruebas A/B, por lo que es beneficioso comenzar con dos modelos en lugar de uno.</span><span class="sxs-lookup"><span data-stu-id="9eee6-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="9eee6-206">La siguiente imagen muestra la canalización de evaluación y entrenamiento de modelos de Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="9eee6-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Modelo de abandono en Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="9eee6-208">También aplicamos una técnica llamada **Importancia de la característica de permutación**, un aspecto importante de la optimización del modelo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="9eee6-209">Los modelos integrados tienen poca o ninguna información sobre el impacto de cualquier característica específica en la predicción final.</span><span class="sxs-lookup"><span data-stu-id="9eee6-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="9eee6-210">La calculadora de importancia de características utiliza un algoritmo personalizado para calcular la influencia de características individuales en el resultado de un modelo específico.</span><span class="sxs-lookup"><span data-stu-id="9eee6-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="9eee6-211">La importancia de la característica se normaliza entre +1 y -1.</span><span class="sxs-lookup"><span data-stu-id="9eee6-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="9eee6-212">Una influencia negativa significa que la característica correspondiente tiene una influencia contraria a la intuición en el resultado y debe eliminarse del modelo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="9eee6-213">Una influencia positiva indica que la función está contribuyendo en gran medida a la predicción.</span><span class="sxs-lookup"><span data-stu-id="9eee6-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="9eee6-214">Estos valores no son coeficientes de correlación, ya que son métricas diferentes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="9eee6-215">Para más información, consulte [Importancia de la característica de permutación](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="9eee6-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="9eee6-216">La totalidad del [experimento de abandono está disponible en Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="9eee6-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="9eee6-217">Predicción del valor de la vida del cliente</span><span class="sxs-lookup"><span data-stu-id="9eee6-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="9eee6-218">El cálculo del valor de vida del cliente (CLTV) es una de las métricas clave que una empresa puede utilizar para evaluar y segmentar a sus clientes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="9eee6-219">Para el negocio hotelero, es fundamental conocer a sus clientes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="9eee6-220">Por ejemplo, conocer los factores que crean buenos clientes es una información crucial.</span><span class="sxs-lookup"><span data-stu-id="9eee6-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="9eee6-221">Ayuda a la gerencia del hotel a evaluar en qué características deben enfocarse y mejorar para satisfacer a sus clientes más rentables.</span><span class="sxs-lookup"><span data-stu-id="9eee6-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="9eee6-222">Estas decisiones pueden tener un impacto directo en las ventas y las ganancias.</span><span class="sxs-lookup"><span data-stu-id="9eee6-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="9eee6-223">Definición de CLTV</span><span class="sxs-lookup"><span data-stu-id="9eee6-223">Definition of CLTV</span></span>

<span data-ttu-id="9eee6-224">Para este ejemplo, definimos el CLTV de un cliente como el importe total en dólares que se espera que el cliente gaste en los próximos 365 días.</span><span class="sxs-lookup"><span data-stu-id="9eee6-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="9eee6-225">Usaremos los datos de los últimos tres años de todos los clientes para predecir este valor.</span><span class="sxs-lookup"><span data-stu-id="9eee6-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="9eee6-226">Caracterización</span><span class="sxs-lookup"><span data-stu-id="9eee6-226">Featurization</span></span>

<span data-ttu-id="9eee6-227">En este caso, la caracterización será muy similar al escenario de abandono.</span><span class="sxs-lookup"><span data-stu-id="9eee6-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="9eee6-228">Sin embargo, las etiquetas y los valores predichos son diferentes a los definidos anteriormente.</span><span class="sxs-lookup"><span data-stu-id="9eee6-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="9eee6-229">Selección de modelo</span><span class="sxs-lookup"><span data-stu-id="9eee6-229">Model selection</span></span>

<span data-ttu-id="9eee6-230">La predicción del CLTV es un problema de regresión, ya que el valor predicho es una variable continua con valor positivo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="9eee6-231">Según las propiedades de la característica, seleccionamos **Regresión de árbol de decisión potenciada** como un algoritmo y **Regresión de redes neuronales** como otro algoritmo para entrenar el modelo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="9eee6-232">Recomendación de producto o Siguiente mejor acción</span><span class="sxs-lookup"><span data-stu-id="9eee6-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="9eee6-233">La recomendación de productos en un escenario de hotel se interpreta como la recomendación de servicios ofrecidos por el hotel a los clientes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="9eee6-234">El objetivo es elegir los servicios adecuados para los clientes de manera que se maximice su uso.</span><span class="sxs-lookup"><span data-stu-id="9eee6-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="9eee6-235">Es similar a las recomendaciones de películas para usuarios de servicios de transmisión de video.</span><span class="sxs-lookup"><span data-stu-id="9eee6-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="9eee6-236">Definición de recomendación de producto o siguiente mejor acción</span><span class="sxs-lookup"><span data-stu-id="9eee6-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="9eee6-237">Definimos el objetivo como maximizar el monto en dólares del uso del servicio al ofrecer los mejores servicios de combinación a los clientes del hotel de acuerdo con sus intereses.</span><span class="sxs-lookup"><span data-stu-id="9eee6-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="9eee6-238">Caracterización</span><span class="sxs-lookup"><span data-stu-id="9eee6-238">Featurization</span></span>

<span data-ttu-id="9eee6-239">Al igual que el modelo de abandono, estamos uniendo el ServiceCustomerID del hotel con el CustomerID, para crear recomendaciones de forma coherente para cada CustomerID.</span><span class="sxs-lookup"><span data-stu-id="9eee6-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Caracterización del modelo de recomendación](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="9eee6-241">Los datos con origen en tres entidades diferentes y las características se derivan de ellas.</span><span class="sxs-lookup"><span data-stu-id="9eee6-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="9eee6-242">La caracterización del problema de recomendación es diferente en comparación con los escenarios de abandono o CLTV.</span><span class="sxs-lookup"><span data-stu-id="9eee6-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="9eee6-243">El modelo de recomendación necesita datos de entrada en forma de tres conjuntos de características.</span><span class="sxs-lookup"><span data-stu-id="9eee6-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="9eee6-244">Selección de modelo</span><span class="sxs-lookup"><span data-stu-id="9eee6-244">Model selection</span></span>

<span data-ttu-id="9eee6-245">Predecimos productos o servicios utilizando el algoritmo llamado **Entrenar Recomendador de Matchbox** para entrenar el modelo de recomendación.</span><span class="sxs-lookup"><span data-stu-id="9eee6-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritmo de Recomendaciones de productos](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="9eee6-247">Los tres puertos de entrada para el modelo **Entrenar Recomendador de Matchbox** incluye los datos de uso del servicio de formación, la descripción del cliente (opcional) y la descripción del servicio.</span><span class="sxs-lookup"><span data-stu-id="9eee6-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="9eee6-248">Hay tres formas diferentes de puntuar el modelo.</span><span class="sxs-lookup"><span data-stu-id="9eee6-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="9eee6-249">Uno es para la evaluación del modelo donde se calcula una puntuación de Ganancia acumulada descontada normalizada (NDCG) para clasificar los elementos calificados.</span><span class="sxs-lookup"><span data-stu-id="9eee6-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="9eee6-250">En este experimento, tenemos la puntuación NDCG de 0,97.</span><span class="sxs-lookup"><span data-stu-id="9eee6-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="9eee6-251">Las otras dos opciones son puntuar el modelo en todo el catálogo de servicios recomendables, o puntuar solo en elementos que los usuarios no han utilizado antes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="9eee6-252">Si miramos más a fondo las distribuciones de las recomendaciones en todo el catálogo de servicios, notamos que teléfono, Wi-Fi y servicio de mensajería son los principales servicios a reomendar.</span><span class="sxs-lookup"><span data-stu-id="9eee6-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="9eee6-253">Esto es consistente con lo que encontramos a partir de las distribuciones de los datos de consumo del servicio:</span><span class="sxs-lookup"><span data-stu-id="9eee6-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Salida del modelo de recomendación](media/azure-machine-learning-model-output.png)

<span data-ttu-id="9eee6-255">La totalidad del [experimento de recomendación de producto está disponible en Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="9eee6-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="9eee6-256">Integrar modelos personalizados</span><span class="sxs-lookup"><span data-stu-id="9eee6-256">Integrate custom models</span></span>

<span data-ttu-id="9eee6-257">Para utilizar estas predicciones en Customer Insights, debe **exportar** las predicciones junto con los id. de cliente.</span><span class="sxs-lookup"><span data-stu-id="9eee6-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="9eee6-258">[Expórtelas a la misma ubicación de almacenamiento de Azure Blob](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) a la que exporta los datos de origen.</span><span class="sxs-lookup"><span data-stu-id="9eee6-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="9eee6-259">El servicio web predictivo se puede programar para que se ejecute regularmente y actualice las puntuaciones.</span><span class="sxs-lookup"><span data-stu-id="9eee6-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="9eee6-260">Los datos generados por el modelo personalizado se pueden utilizar para enriquecer aún más los datos de sus clientes.</span><span class="sxs-lookup"><span data-stu-id="9eee6-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="9eee6-261">Para más información, ver [Modelos personalizados de aprendizaje automático](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="9eee6-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
